<!DOCTYPE html>
<html>

<head>
  <title>
    <%= title %>
  </title>
  <link rel='stylesheet' href='/stylesheets/style.css' />
  <script src="/javascripts/deleteHelper.js"></script>
  <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>

<body class="page">
  <div class="admin">

    <!-- SIDEBAR -->
    <aside class="admin__sidebar sidebar">
      <div class="sidebar__logo">ðŸ›  Dashboard</div>

      <nav class="sidebar__nav">
        <a href="/" class="sidebar__link">
          Home
        </a>
        <a href="/products" class="sidebar__link sidebar__link--active">
          Products
        </a>
        <a href="/orders" class="sidebar__link">
          Orders
        </a>
        <a href="/users" class="sidebar__link">
          Users
        </a>
      </nav>
    </aside>

    <!-- CONTENT -->
    <main class="admin__content content">
      <header class="content__header">
        <h1 class="content__title">Products</h1>
        <a href="/products/create" class="button button--primary">
          + Add product
        </a>
      </header>

      <section class="content__body">
        <table class="table table--products">
          <thead class="table__head">
            <tr class="table__row">
              <th class="table__cell table__cell--head">Photo</th>
              <th class="table__cell table__cell--head">Name</th>
              <th class="table__cell table__cell--head">Description</th>
              <th class="table__cell table__cell--head">Price&#92;hrn</th>
              <th class="table__cell table__cell--head">Amount</th>
              <th class="table__cell table__cell--head">Height&#92;cm</th>
              <th class="table__cell table__cell--head">Width&#92;cm</th>
              <th></th>
              <th></th>
            </tr>
          </thead>

          <tbody class="table__body">
            <% if (!products.length) { %>
              <tr class="table__row">
                <td class="table__cell table__cell--empty" colspan="7">
                  No products found
                </td>
              </tr>
              <% } %>

                <% products.forEach(product=> { %>
                  <tr class="table__row">
                    <td class="table__cell">
                      <div class="table__img">
                        <img src="<%= product.photo ?? '/images/nophoto.webp' %>"
                          alt="<%= product.photo ? product.name : '' %>">
                      </div>
                    </td>
                    <td class="table__cell"><strong>
                        <%= product.name %>
                      </strong></td>
                    <td class="table__cell table__cell--desc">
                      <%= product.description.slice(0, 150) %>...
                    </td>
                    <td class="table__cell">
                      <%= product.price %>
                    </td>
                    <td class="table__cell">
                      <%= product.amount %>
                    </td>
                    <td class="table__cell">
                      <%= product.height %>
                    </td>
                    <td class="table__cell">
                      <%= product.width %>
                    </td>
                    <td class="table__cell table__cell--actions">
                      <a href="/products/update/<%= product._id %>" class="button button--small button--edit">
                        Edit
                      </a>
                      <button class="button button--small button--delete" data-id="<%= product._id %>">
                        Delete
                      </button>
                    </td>
                  </tr>
                  <% }) %>
          </tbody>
        </table>
      </section>
    </main>

  </div>
</body>

</html>